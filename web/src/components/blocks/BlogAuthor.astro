---
import ResponsiveImage from '../ResponsiveImage.astro';

interface Author {
    name: string;
    image?: any;
    bio?: any[];
}

interface BlogAuthorProps {
    author: Author;
}

const { author } = Astro.props;

// Función para convertir contenido de Sanity a HTML
const renderBio = (bio: any[]) => {
    if (!bio || bio.length === 0) return '';
    
    return bio.map(block => {
        if (block._type === 'block' && block.children) {
            const text = block.children.map((child: any) => child.text).join('');
            return `<p class="mb-4">${text}</p>`;
        }
        return '';
    }).join('');
};
---

<div class="blog-author bg-gray-50 border-t border-gray-200 py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-lg shadow-sm p-8">
            <div class="flex flex-col md:flex-row items-start md:items-center gap-6">
                <!-- Imagen del autor -->
                {author.image && (
                    <div class="flex-shrink-0">
                        <div class="w-20 h-20 rounded-full overflow-hidden bg-gray-200">
                            <ResponsiveImage
                                image={author.image}
                                alt={author.name}
                                class="w-full h-full object-cover"
                                aspectRatio="1:1"
                            />
                        </div>
                    </div>
                )}
                
                <!-- Información del autor -->
                <div class="flex-1">
                    <h3 class="text-xl font-semibold text-brand-forest-500 mb-2">
                        Sobre {author.name}
                    </h3>
                    
                    {author.bio && author.bio.length > 0 ? (
                        <div 
                            class="text-gray-600 prose prose-sm max-w-none"
                            set:html={renderBio(author.bio)}
                        ></div>
                    ) : (
                        <p class="text-gray-600">
                            Autor de este artículo. Más información próximamente.
                        </p>
                    )}
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .prose p:last-child {
        margin-bottom: 0;
    }
</style>
