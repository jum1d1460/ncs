---
interface NavItem { 
  label?: string; 
  url?: string; 
  target?: string; 
  page?: { slug?: { current?: string } };
  children?: NavSubItem[];
}
interface NavSubItem { 
  label?: string; 
  url?: string; 
  target?: string; 
  page?: { slug?: { current?: string } };
}
interface SocialLink { type?: string; url?: string }
interface Props {
  logoUrl?: string | null
  logoAlt?: string | null
  footerTitle?: string | null
  seoFooterText?: string | null
  navMain?: NavItem[]
  legalLinks?: NavItem[]
  socialLinks?: SocialLink[]
  contact?: { phone?: string | null; whatsapp?: string | null; email?: string | null }
}
const { logoUrl, logoAlt, footerTitle, seoFooterText, navMain = [], legalLinks = [], socialLinks = [], contact } = Astro.props as Props
---

<footer class="w-full bg-gray-900 text-white">
  <div class="py-16 px-4 max-w-7xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Columna 1: Información de contacto y marca -->
      <div class="space-y-6">
        {logoUrl && <img src={logoUrl} alt={logoAlt ?? ''} class="h-10 w-auto" />}
        {footerTitle && <h2 class="text-responsive-h4 font-bold text-white">{footerTitle}</h2>}
        {seoFooterText && <p class="text-responsive-small text-gray-300 leading-relaxed">{seoFooterText}</p>}
        
        <!-- Información de contacto -->
        <div class="space-y-3">
          {contact?.phone && (
            <div class="flex items-center gap-3 text-responsive-small text-gray-300">
              <svg class="w-4 h-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
              </svg>
              <a href={`tel:${contact.phone}`} class="hover:text-white transition-colors">{contact.phone}</a>
            </div>
          )}
          {contact?.email && (
            <div class="flex items-center gap-3 text-responsive-small text-gray-300">
              <svg class="w-4 h-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
              </svg>
              <a href={`mailto:${contact.email}`} class="hover:text-white transition-colors">{contact.email}</a>
            </div>
          )}
          <div class="flex items-center gap-3 text-responsive-small text-gray-300">
            <svg class="w-4 h-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
            </svg>
            <span>Zaragoza, España</span>
          </div>
        </div>

        <!-- Redes sociales -->
        {socialLinks && socialLinks.length > 0 && (
          <div class="pt-4">
            <h3 class="text-responsive-small font-semibold text-white mb-3">Sígueme en redes</h3>
            <div class="flex items-center gap-3">
              {socialLinks.map((social) => (
                <a 
                  href={social.url} 
                  aria-label={social.type} 
                  class="w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700 transition-colors"
                >
                  <span class="text-sm font-medium">{social.type?.charAt(0).toUpperCase()}</span>
                </a>
              ))}
            </div>
          </div>
        )}
      </div>

      <!-- Columnas de menú -->
      {navMain && navMain.length > 0 && (
        <>
          {navMain.slice(0, 2).map((section, index) => (
            <nav aria-label={section.label} class="space-y-4">
              <h3 class="text-responsive-small font-semibold text-white">{section.label}</h3>
              <ul class="space-y-2">
                {section.children && section.children.map((item) => {
                  const href = item.url && item.url.trim().length > 0 
                    ? item.url 
                    : (item.page?.slug?.current ? `/${item.page.slug.current}` : '#')
                  const target = item.target ?? (href.startsWith('http') ? '_blank' : '_self')
                  return (
                    <li>
                      <a 
                        class="text-responsive-small text-gray-300 hover:text-white transition-colors" 
                        href={href} 
                        target={target} 
                        rel={target === '_blank' ? 'noopener noreferrer' : undefined}
                      >
                        {item.label}
                      </a>
                    </li>
                  )
                })}
              </ul>
            </nav>
          ))}
        </>
      )}

      <!-- Columna de información legal -->
      <nav aria-label="Información" class="space-y-4">
        <h3 class="text-responsive-small font-semibold text-white">Información</h3>
        <ul class="space-y-2">
          <!-- Enlace a Herramientas -->
          <li>
            <a 
              class="text-responsive-small text-gray-300 hover:text-white transition-colors" 
              href="/herramientas"
            >
              Herramientas de Evaluación
            </a>
          </li>
          {legalLinks?.map((item) => (
            <li>
              <a 
                class="text-responsive-small text-gray-300 hover:text-white transition-colors" 
                href={item.url}
              >
                {item.label}
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </div>
  
  <!-- Línea inferior con copyright -->
  <div class="border-t border-gray-800">
    <div class="py-6 px-4 max-w-7xl mx-auto flex flex-col gap-4 md:flex-row md:items-center md:justify-between text-responsive-small text-gray-400">
      <div>© {new Date().getFullYear()} {footerTitle || 'NCS'}. Todos los derechos reservados.</div>
      <div class="flex items-center gap-6">
        {legalLinks?.map((item) => (
          <a 
            class="hover:text-white transition-colors" 
            href={item.url}
          >
            {item.label}
          </a>
        ))}
      </div>
    </div>
  </div>
</footer>


