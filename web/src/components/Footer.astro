---
interface NavItem { label?: string; url?: string; target?: string; page?: { slug?: { current?: string } } }
interface SocialLink { type?: string; url?: string }
interface Props {
  logoUrl?: string | null
  logoAlt?: string | null
  seoFooterText?: string | null
  navMain?: NavItem[]
  legalLinks?: NavItem[]
  socialLinks?: SocialLink[]
  contact?: { phone?: string | null; whatsapp?: string | null; email?: string | null }
}
const { logoUrl, logoAlt, seoFooterText, navMain = [], legalLinks = [], socialLinks = [], contact } = Astro.props as Props
---

<footer class="w-full border-t border-gray-200 bg-gray-50">
  <div class="mx-auto max-w-7xl px-4 py-10 grid grid-cols-1 md:grid-cols-3 gap-8">
    <div class="space-y-4">
      {logoUrl && <img src={logoUrl} alt={logoAlt ?? ''} class="h-8 w-auto" />}
      {seoFooterText && <p class="text-responsive-small text-gray-700">{seoFooterText}</p>}
      <div class="space-y-1">
        {contact?.phone && <div class="text-responsive-small text-gray-700"><a href={`tel:${contact.phone}`} class="hover:text-gray-900 underline">{contact.phone}</a></div>}
        {contact?.email && <div class="text-responsive-small text-gray-700"><a href={`mailto:${contact.email}`} class="hover:text-gray-900 underline">{contact.email}</a></div>}
        {contact?.whatsapp && <div class="text-responsive-small text-gray-700"><a href={`https://wa.me/${contact.whatsapp}`} class="hover:text-gray-900 underline">WhatsApp</a></div>}
      </div>
      <div class="flex items-center gap-3 pt-2" aria-label="Redes sociales">
        {socialLinks?.map((s) => (
          <a href={s.url} aria-label={s.type} class="text-gray-600 hover:text-gray-900 text-responsive-small underline">{s.type}</a>
        ))}
      </div>
    </div>
    <nav aria-label="Principal" class="space-y-2">
      <h3 class="text-responsive-small font-semibold text-gray-900">Navegación</h3>
      <ul class="space-y-1">
        {navMain?.map((item) => {
          const href = item.url && item.url.trim().length > 0 
            ? item.url 
            : (item.page?.slug?.current ? `/${item.page.slug.current}` : '#')
          const target = item.target ?? (href.startsWith('http') ? '_blank' : '_self')
          return (
            <li><a class="text-responsive-small text-gray-700 hover:text-gray-900" href={href} target={target} rel={target === '_blank' ? 'noopener noreferrer' : undefined}>{item.label}</a></li>
          )
        })}
      </ul>
    </nav>
    <nav aria-label="Legales" class="space-y-2">
      <h3 class="text-responsive-small font-semibold text-gray-900">Legales</h3>
      <ul class="space-y-1">
        {legalLinks?.map((item) => (
          <li><a class="text-responsive-small text-gray-700 hover:text-gray-900" href={item.url}>{item.label}</a></li>
        ))}
      </ul>
    </nav>
  </div>
  <div class="border-t border-gray-200">
    <div class="mx-auto max-w-7xl px-4 py-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between text-responsive-small text-gray-600">
      <div>© {new Date().getFullYear()} NCS</div>
      <div class="flex items-center gap-4">
        {legalLinks?.map((item) => (
          <a class="hover:text-gray-900" href={item.url}>{item.label}</a>
        ))}
      </div>
    </div>
  </div>
</footer>


